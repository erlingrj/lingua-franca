target Chisel {
    timeout: 1 usec
}


reactor WithPreamble {
    preamble {=
        object PreambleTest {
            val test = 42.U
        }
    =}

    reaction(startup) {=
        printf("Test = %d\n", PreambleTest.test)
        assert(PreambleTest.test === 42.U)
    =}
}

main reactor {
    w = new WithPreamble()
}