target C {
    scheduler: LET,
    build: "bash replaceReactorC.sh",
    workers: 2,
    timeout: 200 msec
};


reactor LET(offset:time(0)) {
    timer t(offset, 100 msec)
    logical action let(50 msec): int

    reaction(t) -> let {=
        instant_t physical_time = lf_time_physical();
        while (lf_time_physical() < physical_time + MSEC(50)) {
            // Do nothing.
        }
        lf_schedule_int(let, 0, 42);
    =} deadline(40 msec) {=
        lf_print_error_and_exit("Failed to take advantage of LET");
    =}
}

reactor Modal {
    output out: int

    initial mode One {
        reset state count: int(42);
        r1 = new LET(offset=10msec)
        r2 = new LET(offset=11msec)
    }
}

main reactor {
    let = new Modal()
}